---
layout: post
title: OHTTP
date: 2025-01-03 15:57 +0800
categories: [编程, 密码学]
tags: [密码学]
---

OHTTP (Oblivious HTTP) 是一种增强隐私的协议，旨在通过代理服务器隐藏客户端和目标服务器之间的直接交互，从而保护用户隐私。它最常用于场景中，用户需要访问某些服务，但又不希望目标服务器知道用户的身份或 IP 地址。

## 核心概念
OHTTP 的基本思想是使用 代理服务器 和 加密技术，在客户端和目标服务器之间插入一个中间节点（代理），使目标服务器无法直接得知客户端的请求来源。

1. 客户端：发起 HTTP 请求。
2. 代理服务器：接收客户端请求并将其转发到目标服务器。
3. 目标服务器：处理请求并返回响应，但不知道请求的实际来源。
OHTTP 使用端到端加密，确保代理服务器无法解密请求内容，而目标服务器也无法得知客户端的 IP 地址。

## 技术细节
1. 加密机制： OHTTP 使用 HPKE (Hybrid Public Key Encryption)，一种混合加密方案，确保请求内容在客户端和目标服务器之间是加密的。具体过程：

* 客户端使用目标服务器的公钥加密请求。
* 代理服务器无法解密请求内容，只能转发。
* 目标服务器使用私钥解密请求，处理后再加密响应。

2. 协议角色：

* Client：构建加密请求，发送给代理。
* Relay (Proxy)：转发请求和响应，但无法解密数据。
* Gateway (Target Server)：解密请求，处理后加密响应。

3. 工作流程：

* 客户端构建 HTTP 请求。
* 使用目标服务器的公钥加密请求。
* 将加密的请求发送给代理服务器。
* 代理服务器转发请求给目标服务器。
* 目标服务器解密请求，处理并返回响应（加密）。
* 客户端解密响应内容。

4. 隐私保护：

* 请求匿名化：目标服务器无法直接追踪客户端 IP。
* 代理隔离：代理服务器无法读取请求内容。

## 应用场景
1. 隐私保护的 API 调用：

用户可以访问某些敏感服务（如 DNS 查询、内容过滤服务）而不暴露身份。

2. 广告隐私保护：

广告商通过 OHTTP 收集用户行为数据，但无法获知用户具体身份。

3. 内容分发网络 (CDN)：

防止 CDN 知道用户的访问习惯，同时保持内容缓存的高效性。

4. 隐私增强服务：

提供匿名化的访问接口，保护用户隐私。

## 优势与局限
### 优势：
隐私增强：通过中间代理和加密，实现客户端的匿名化。
灵活性：适用于多种 HTTP 服务，不要求完全改变现有架构。
安全性：使用现代加密技术，确保数据的端到端加密。

### 局限：
代理信任问题：虽然代理无法解密请求，但仍能分析流量模式。
性能开销：加密和解密过程增加了计算成本和延迟。
依赖配置：需要目标服务器支持 OHTTP 协议。

## 实现与支持
* 标准化：OHTTP 是 IETF 的一项正在标准化的协议，已在一些隐私保护项目中试验性应用。
* 库与框架：
    * libsodium: 提供加密支持。
    * Go、Rust 等语言的 OHTTP 实现库。
OHTTP 是一个致力于为互联网用户提供隐私保护的创新协议，随着隐私需求的增长，其应用场景和影响力可能会持续扩大。