---
title: IAM
date: 2025-09-17 10:00:00 +0800
categories: [Cloud, IAM]
tags: [cloud, iam]
---

## 基本概念
访问控制（Identity and Access Management，缩写为IAM），是平台提供的一套基于ABAC的多身份权限管理系统。IAM既可用于管控云上员工用户和工作负载对云资源访问的安全性，也为Provider服务与服务之间调用提供安全合规保障。
访问控制里的概念可以划为三类：身份、权限、凭证。

### 身份
#### 用户
用户（User）是IAM中的一种身份，由账号（Account）或者拥有权限的用户创建。用户被授予权限（Policy）后，即可登录控制台或者使用访问密钥（Access Key）调用API访问云资源。
实际场景中用户可以对应到实际的人，也可以对应到某个应用程序。
账号（Account）又称为主账号，是云服务资源的owner，根用户，拥有所有资源的权限。

#### 用户组
用户组（User Group）是用户的集合，用户可以被添加到一个或多个用户组中。用户组可以被授予权限，从而批量管理多个用户的权限。

#### 角色
传统RBAC（Role-Based Access Control）模型中，角色（Role）是权限的集合，用户被分配到一个或多个角色，角色又被授予对资源的访问权限。
在IAM中的角色是一种支持跨身份类型授权、可用于生产临时身份（角色会话）的一种特殊实体。角色本身不可以直接访问云服务资源，而是需要授权给其他身份，受信任的身份通过角色扮演（AssumeRole）生产临时会话，并以临时会话的安全凭证（STS）来访问云资源。

#### 服务
使用Service来表达Action归属的云服务。

#### 身份提供商
非IAM体系的第三方身份服务（Identity Provider，IDP），如LDAP、AD等。


### 权限
策略（Policy）是IAM中的一种权限定义，用于描述用户、用户组、角色或服务的访问权限。权限可以基于资源resource、操作action和条件condition进行定义。策略语法说明参考：https://www.volcengine.com/docs/6257/65059

### 凭证
#### 访问密钥
访问密钥（Access Key）是用户用于访问云资源的凭证，包括Access Key ID和Secret Access Key。Access Key ID用于标识用户，Secret Access Key用于验证用户身份。
#### 临时凭证
由STS服务颁发，具备一定时效性，一般用于控制台访问和客户端访问场景。


## 鉴权原理
### 用户请求
用户访问服务的方式包括
* 控制台访问：用户通过浏览器登录控制台，访问凭证来源于用户的登陆态返回的STS。
* 编程访问：用户通过调用OpenAPI接口，在请求中包含Access Key ID和Secret Access Key进行身份验证。

用户请求中包含丰富上下文信息：身份属性、资源属性、请求属性、环境属性

### 网关鉴权
用户请求到达网关后，网关会调用IAM的鉴权服务进行鉴权。鉴权服务会根据用户请求中的上下文信息，结合策略进行权限评估，最终返回允许或拒绝的结果。